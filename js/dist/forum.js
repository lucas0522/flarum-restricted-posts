(()=>{var t={n:r=>{var e=r&&r.__esModule?()=>r.default:()=>r;return t.d(e,{a:e}),e},d:(r,e)=>{for(var o in e)t.o(e,o)&&!t.o(r,o)&&Object.defineProperty(r,o,{enumerable:!0,get:e[o]})},o:(t,r)=>Object.prototype.hasOwnProperty.call(t,r)};(()=>{"use strict";const r=flarum.core.compat["common/extend"],e=flarum.core.compat["forum/app"];var o=t.n(e);const s=flarum.core.compat["forum/components/Post"];var n=t.n(s);const i=flarum.core.compat["forum/components/CommentPost"];var c=t.n(i);const a=flarum.core.compat["common/components/Button"];var p=t.n(a);const u=flarum.core.compat["common/components/Select"];var d=t.n(u);const l=flarum.core.compat["forum/components/DiscussionComposer"];var f=t.n(l);const h=flarum.core.compat["forum/components/ReplyComposer"];var v=t.n(h);const y=flarum.core.compat["forum/utils/PostControls"];var k=t.n(y);o().initializers.add("hertz-dev-restricted-posts",function(){(0,r.extend)(c().prototype,"headerItems",function(t){var r=this.attrs.post;r&&(r.attribute("restrictionType")||r.attribute("isRestricted"))&&t.add("restrictedBadge",m("span",{className:"RestrictedBadge",title:o().translator.trans("hertz-dev-restricted-posts.forum.restricted_post")},m("i",{className:"fas fa-lock"})),70)}),(0,r.extend)(k(),"userControls",function(t,r,e){r.attribute("canMarkRestricted")&&(r.attribute("isRestricted")?t.add("unmarkRestricted",p().component({icon:"fas fa-unlock",onclick:function(){return e.unmarkAsRestricted()}},o().translator.trans("hertz-dev-restricted-posts.forum.unmark_restricted")),90):t.add("markRestricted",p().component({icon:"fas fa-lock",onclick:function(){return e.markAsRestricted()}},o().translator.trans("hertz-dev-restricted-posts.forum.mark_restricted")),90))}),(0,r.extend)(n().prototype,"oninit",function(){var t=this;this.markAsRestricted=function(){var r=t.attrs.post;o().request({method:"POST",url:o().forum.attribute("apiUrl")+"/posts/"+r.id()+"/mark-restricted",body:{restrictionType:"group"}}).then(function(){r.pushAttributes({isRestricted:!0,restrictionType:"group"}),m.redraw()})},this.unmarkAsRestricted=function(){var r=t.attrs.post;o().request({method:"DELETE",url:o().forum.attribute("apiUrl")+"/posts/"+r.id()+"/unmark-restricted"}).then(function(){r.pushAttributes({isRestricted:!1,restrictionType:null}),m.redraw()})}});var t=function(){return{"":o().translator.trans("hertz-dev-restricted-posts.forum.options.public"),login:o().translator.trans("hertz-dev-restricted-posts.forum.options.login"),group:o().translator.trans("hertz-dev-restricted-posts.forum.options.group")}};(0,r.extend)(f().prototype,"headerItems",function(r){var e=this;o().forum.attribute("canMarkRestrictedPosts")&&r.add("restrictionType",m("div",{className:"Form-group RestrictionSelect"},[d().component({options:t(),value:this.composer.fields.restrictionType||"",onchange:function(t){e.composer.fields.restrictionType=t}})]),9)}),(0,r.extend)(v().prototype,"headerItems",function(r){var e=this;o().forum.attribute("canMarkRestrictedPosts")&&r.add("restrictionType",m("div",{className:"Form-group RestrictionSelect"},[d().component({options:t(),value:this.composer.fields.restrictionType||"",onchange:function(t){e.composer.fields.restrictionType=t}})]),9)}),(0,r.extend)(f().prototype,"data",function(t){t.restrictionType=this.composer.fields.restrictionType||null}),(0,r.extend)(v().prototype,"data",function(t){t.restrictionType=this.composer.fields.restrictionType||null})})})(),module.exports={}})();
//# sourceMappingURL=forum.js.map